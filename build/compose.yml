version: '3'

services:
  kitsune.standalone: 
    profiles:
      - standalone
    container_name: kitsune.standalone
    build:
      context: ../
      dockerfile: build/Dockerfile.standalone
    image: kodmain/kitsune.standalone:latest

  kitsune.gateway: 
    profiles:
      - services
    container_name: kitsune.gateway
    build:
      context: ../
      dockerfile: build/Dockerfile.service
      args:
        - BINARY_NAME=gateway
    image: kodmain/kitsune.gateway:latest

  kitsune.cache:
    profiles:
      - services
    container_name: kitsune.cache
    build:
      context: ../
      dockerfile: build/Dockerfile.service
      args:
        - BINARY_NAME=cache
    image: kodmain/kitsune.cache:latest
